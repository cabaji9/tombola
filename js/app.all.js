function TombolaCtrl($rootScope,$scope,$filter,$routeParams,AppService){$scope.value="HOLA TEST ONE",Math.TWO_PI=2*Math.PI,Math.sum=function(a,b){return a+b};var roulette_wheel_selection=function(fitness,random){random=void 0!==random?random:Math.random;var rand=random()*_.reduce(fitness,Math.sum,0),tmp=0,selected_index=-1;for(i=0;i<fitness.length;i++)if(tmp+=fitness[i],rand<tmp){selected_index=i;break}return selected_index};$scope.bringData=function(evt){AppService.getData().then(function(data){$scope.dataBack=data})};var create_wheel_image=function(){var canvas=document.createElement("canvas");canvas.width=2*this.wheel_radius+16,canvas.height=2*this.wheel_radius+16;var wheel_center_x=this.wheel_radius,wheel_center_y=this.wheel_radius,ctx=canvas.getContext("2d");ctx.translate(wheel_center_x,wheel_center_y),ctx.translate(-wheel_center_x,-wheel_center_y);for(var acr_start=0,i=0;i<this.arc_widths.length;i++){ctx.fillStyle="#ff0000",ctx.lineWidth=this.lineWidth,ctx.strokeStyle=this.lineColor,ctx.beginPath(),ctx.moveTo(wheel_center_x,wheel_center_y);var arc_end=acr_start+this.arc_widths[i];ctx.arc(wheel_center_x,wheel_center_y,this.wheel_radius-this.lineWidth,acr_start,arc_end,!1),ctx.lineTo(wheel_center_x,wheel_center_y),ctx.fill(),ctx.stroke(),ctx.save();var adjacent=Math.cos(acr_start+(arc_end-acr_start)/2)*(this.wheel_radius-10),opposite=Math.sin(acr_start+(arc_end-acr_start)/2)*(this.wheel_radius-10);ctx.translate(wheel_center_x+adjacent,wheel_center_y+opposite),ctx.rotate(acr_start+(arc_end-acr_start)/2),ctx.fillStyle="#000000",ctx.textAlign="right",ctx.font="20px marcellus",ctx.textBaseline="middle",ctx.fillText(this.labels[i],0,0),ctx.restore(),acr_start=arc_end}return canvas},createInnerCircle=function(ctx){var wheel_center_x=this.wheel_margin+this.wheel_radius,wheel_center_y=this.wheel_margin+this.wheel_radius;ctx.fillStyle="#ff0000",ctx.lineWidth=this.lineWidth,ctx.strokeStyle=this.lineColor,ctx.beginPath(),ctx.arc(wheel_center_x,wheel_center_y,50,0,2*Math.PI,!1),ctx.fill(),ctx.stroke();ctx.fillStyle="#ffffff",ctx.font="20px marcellus",ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText("CLICK",wheel_center_x,wheel_center_y-10),ctx.fillText("AQUÍ",wheel_center_x,wheel_center_y+10)},render=function(rotation){rotation=void 0!==rotation?rotation:0;var canvas=this.wheel_canvas,ctx=canvas.getContext("2d"),wheel_center_x=this.wheel_margin+this.wheel_radius,wheel_center_y=this.wheel_margin+this.wheel_radius;ctx.save(),ctx.clearRect(0,0,canvas.width,canvas.height),ctx.translate(wheel_center_x,wheel_center_y),ctx.rotate(rotation),ctx.translate(-wheel_center_x,-wheel_center_y),ctx.drawImage(this.wheel_image,this.wheel_margin,this.wheel_margin),ctx.restore(),createInnerCircle(ctx),ctx.beginPath(),ctx.moveTo(wheel_center_x+this.wheel_radius-5,wheel_center_y),ctx.strokeStyle="#00ff00",ctx.lineWidth=3,ctx.lineTo(wheel_center_x+this.wheel_radius+50,wheel_center_y),ctx.stroke()},getW=function(collection){for(var index=-1,i=0;i<collection.length;i++){var collectionItem=collection[i];if(collectionItem.w&&1===collectionItem.w){index=i;break}}return index},reset=function(collection){this.indexW=getW(collection);var fitness_values=collection.map(function(individual){return individual.fitness}),fitness_sum=_.reduce(fitness_values,Math.sum,0);if(0!==fitness_sum){var label_values=collection.map(function(individual){return individual.label});this.arc_widths=_.map(fitness_values,function(fitness){return fitness/fitness_sum*Math.TWO_PI}),this.labels=label_values}else this.arc_widths=[],this.labels=[];var canvas_el=this.$wheel_canvas,canvas=this.wheel_canvas,bounding_rect_width=Math.min(canvas.width,canvas.height);this.wheel_margin=20,this.wheel_radius=bounding_rect_width/2-this.wheel_margin,canvas.width=Math.min(Math.max(Math.min(window.innerWidth,window.innerHeight),320),500),canvas.height=canvas.width,this.wheel_image=create_wheel_image(),canvas_el.addClass("clickable"),render()},getIndex=function(self){var index=this.indexW;return-1==this.indexW&&(index=roulette_wheel_selection(self.arc_widths,self.random)),index},render_spin=function(after){after=void 0!==after?after:_.noop();var self=this,index=getIndex(self),partial_exclusive=_.reduce(self.arc_widths.slice(0,index),Math.sum,0),partial_inclusive=partial_exclusive+self.arc_widths[index],angle_selected=partial_exclusive+(partial_inclusive-partial_exclusive)/2,rotation_max=10*Math.TWO_PI+(Math.TWO_PI-angle_selected),animation_start=moment(),animation_interval=setInterval(function(){var time=moment().diff(animation_start),easing=$.easing.easeOutCirc(null,time,0,rotation_max,self.animation_duration),rotation=easing%Math.TWO_PI;render(rotation)},Math.min(1,Math.round(1e3/this.fps)));setTimeout(function(){clearInterval(animation_interval),after()},self.animation_duration)},spin=function(){var el=$("canvas").first();el.hasClass("clickable")&&(el.removeClass("clickable"),render_spin(function(){el.addClass("clickable")}))},initialize=function(options){options=void 0!==options?options:{},this.random=void 0!==options.random?options.random:Math.random,this.animation_duration=void 0!==options.animation_duration?options.animation_duration:1e4,this.fps=void 0!==options.fps?options.fps:60,this.$wheel_canvas=$("canvas"),this.wheel_canvas=this.$wheel_canvas.get(0),this.lineWidth="undefined"!==options.lineWidth?options.lineWidth:3,this.lineColor="undefined"!==options.lineColor?options.lineColor:"#000000";var collection=options.collection;reset(collection),this.$wheel_canvas.click(spin)},chance=new Chance,rng=function(){return chance.random()};angular.element(document).ready(function(){var wheel={random:rng,collection:[{label:"Uno",value:"1",fitness:1,w:0},{label:"dos",value:"2",fitness:1,w:0},{label:"tres",value:"3",fitness:1,w:0}],lineWidth:5,lineColor:"#000000"},marcellus=new FontFace("marcellus","url(../font/MarcellusSC-Regular.ttf)",{style:"normal",weight:"400"});document.fonts.add(marcellus),marcellus.load(),marcellus.loaded.then(function(fontFace){console.info("Current status",fontFace.status),console.log(fontFace.family,"loaded successfully."),initialize(wheel)},function(error){console.log("not found font")})})}!function(){"use strict";function bootstrapApplication(){angular.element(document).ready(function(){angular.bootstrap(document,["app"])})}var app=angular.module("app",["ngRoute","ui.bootstrap","ngSanitize","ngAnalytics"]);(function(){var initInjector=angular.injector(["ng"]),$http=initInjector.get("$http");return $http.get("tombola.config.json?v2").then(function(response){var configData=response.data;configData.adminContext=configData.backendBaseContext+"/api/",app.constant("config",configData)},function(errorResponse){app.constant("config",{backendBaseContext:"http://localhost:8080/smart-backend",adminContext:"http://localhost:8080/smart-backend/api/"})})})().then(bootstrapApplication)}(),function(){"use strict";function appCtrl($rootScope,$scope,$uibModal){}angular.module("app").controller("appCtrl",["$rootScope","$scope","$uibModal",appCtrl])}(),function(){"use strict";function ResponseService(){this.success=function(response){return response.data},this.error=function(error){alert(error)}}angular.module("app").service("responseService",ResponseService)}(),function(){"use strict";angular.module("app").run(["$rootScope","$location","ngAnalyticsService",function($rootScope,$location,ngAnalyticsService){}]),angular.module("app").config(["$httpProvider",function($httpProvider){$httpProvider.defaults.useXDomain=!0,delete $httpProvider.defaults.headers.common["X-Requested-With"]}]),angular.module("app").config(function($routeProvider){$routeProvider.when("/tombola",{templateUrl:"app/tombola/main.html"}).otherwise({redirectTo:"/tombola"})})}();var app=angular.module("app");app.controller("TombolaCtrl",["$rootScope","$scope","$filter","$routeParams","AppService",TombolaCtrl]),angular.module("app").service("AppService",["$http","$sce","config","responseService","$location",function($http,$sce,configService,ResponseService,$location){var context=configService.backendUrl;this.getData=function(){var url=context+"/data";return $http.get(url).then(function(response){return response.data},ResponseService.error)}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvbWJvbGEvVG9tYm9sYUN0cmwuanMiLCJhcHAuanMiLCJhcHBDdHJsLmpzIiwiY29tbW9uL3Jlc3BvbnNlU2VydmljZS5qcyIsImNvbmZpZy9yb3V0ZUNvbmZpZy5qcyIsInRvbWJvbGEvVG9tYm9sYVNlcnZpY2UuanMiXSwibmFtZXMiOlsiVG9tYm9sYUN0cmwiLCIkcm9vdFNjb3BlIiwiJHNjb3BlIiwiJGZpbHRlciIsIiRyb3V0ZVBhcmFtcyIsIkFwcFNlcnZpY2UiLCJ2YWx1ZSIsIk1hdGgiLCJUV09fUEkiLCJQSSIsInN1bSIsImEiLCJiIiwicm91bGV0dGVfd2hlZWxfc2VsZWN0aW9uIiwiZml0bmVzcyIsInJhbmRvbSIsInJhbmQiLCJfIiwicmVkdWNlIiwidG1wIiwic2VsZWN0ZWRfaW5kZXgiLCJpIiwibGVuZ3RoIiwiYnJpbmdEYXRhIiwiZXZ0IiwiZ2V0RGF0YSIsInRoZW4iLCJkYXRhIiwiZGF0YUJhY2siLCJjcmVhdGVfd2hlZWxfaW1hZ2UiLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ3aWR0aCIsInRoaXMiLCJ3aGVlbF9yYWRpdXMiLCJoZWlnaHQiLCJ3aGVlbF9jZW50ZXJfeCIsIndoZWVsX2NlbnRlcl95IiwiY3R4IiwiZ2V0Q29udGV4dCIsInRyYW5zbGF0ZSIsImFjcl9zdGFydCIsImFyY193aWR0aHMiLCJmaWxsU3R5bGUiLCJsaW5lV2lkdGgiLCJzdHJva2VTdHlsZSIsImxpbmVDb2xvciIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImFyY19lbmQiLCJhcmMiLCJsaW5lVG8iLCJmaWxsIiwic3Ryb2tlIiwic2F2ZSIsImFkamFjZW50IiwiY29zIiwib3Bwb3NpdGUiLCJzaW4iLCJyb3RhdGUiLCJ0ZXh0QWxpZ24iLCJmb250IiwidGV4dEJhc2VsaW5lIiwiZmlsbFRleHQiLCJsYWJlbHMiLCJyZXN0b3JlIiwiY3JlYXRlSW5uZXJDaXJjbGUiLCJ3aGVlbF9tYXJnaW4iLCJmb250U2l6ZSIsInJlbmRlciIsInJvdGF0aW9uIiwid2hlZWxfY2FudmFzIiwiY2xlYXJSZWN0IiwiZHJhd0ltYWdlIiwid2hlZWxfaW1hZ2UiLCJnZXRXIiwiY29sbGVjdGlvbiIsImluZGV4IiwiY29sbGVjdGlvbkl0ZW0iLCJ3IiwicmVzZXQiLCJpbmRleFciLCJmaXRuZXNzX3ZhbHVlcyIsIm1hcCIsImluZGl2aWR1YWwiLCJmaXRuZXNzX3N1bSIsImxhYmVsX3ZhbHVlcyIsImNhbnZhc19lbCIsIiR3aGVlbF9jYW52YXMiLCJib3VuZGluZ19yZWN0X3dpZHRoIiwibWluIiwibWF4Iiwid2luZG93IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiYWRkQ2xhc3MiLCJnZXRJbmRleCIsInNlbGYiLCJyZW5kZXJfc3BpbiIsImFmdGVyIiwibm9vcCIsInBhcnRpYWxfZXhjbHVzaXZlIiwic2xpY2UiLCJwYXJ0aWFsX2luY2x1c2l2ZSIsImFuZ2xlX3NlbGVjdGVkIiwicm90YXRpb25fbWF4IiwiYW5pbWF0aW9uX3N0YXJ0IiwibW9tZW50IiwiYW5pbWF0aW9uX2ludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJ0aW1lIiwiZGlmZiIsImVhc2luZyIsIiQiLCJlYXNlT3V0Q2lyYyIsImFuaW1hdGlvbl9kdXJhdGlvbiIsInJvdW5kIiwiZnBzIiwic2V0VGltZW91dCIsImNsZWFySW50ZXJ2YWwiLCJzcGluIiwiZWwiLCJmaXJzdCIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJpbml0aWFsaXplIiwib3B0aW9ucyIsImdldCIsImNsaWNrIiwiY2hhbmNlIiwiQ2hhbmNlIiwicm5nIiwiYW5ndWxhciIsImVsZW1lbnQiLCJyZWFkeSIsIndoZWVsIiwibGFiZWwiLCJtYXJjZWxsdXMiLCJGb250RmFjZSIsInN0eWxlIiwid2VpZ2h0IiwiZm9udHMiLCJhZGQiLCJsb2FkIiwibG9hZGVkIiwiZm9udEZhY2UiLCJjb25zb2xlIiwiaW5mbyIsInN0YXR1cyIsImxvZyIsImZhbWlseSIsImVycm9yIiwiYm9vdHN0cmFwQXBwbGljYXRpb24iLCJib290c3RyYXAiLCJhcHAiLCJtb2R1bGUiLCJpbml0SW5qZWN0b3IiLCJpbmplY3RvciIsIiRodHRwIiwicmVzcG9uc2UiLCJjb25maWdEYXRhIiwiYWRtaW5Db250ZXh0IiwiYmFja2VuZEJhc2VDb250ZXh0IiwiY29uc3RhbnQiLCJlcnJvclJlc3BvbnNlIiwiZGVmYXVsdEJhY2tlbmQiLCJhcHBDdHJsIiwiJHVpYk1vZGFsIiwiY29udHJvbGxlciIsIlJlc3BvbnNlU2VydmljZSIsInN1Y2Nlc3MiLCJhbGVydCIsInNlcnZpY2UiLCJydW4iLCIkbG9jYXRpb24iLCJuZ0FuYWx5dGljc1NlcnZpY2UiLCJjb25maWciLCIkaHR0cFByb3ZpZGVyIiwiZGVmYXVsdHMiLCJ1c2VYRG9tYWluIiwiaGVhZGVycyIsImNvbW1vbiIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsIiRzY2UiLCJjb25maWdTZXJ2aWNlIiwiY29udGV4dCIsImJhY2tlbmRVcmwiLCJ1cmwiXSwibWFwcGluZ3MiOiJBQUdBLFFBQUFBLGFBQUFDLFdBQUFDLE9BQUFDLFFBQUFDLGFBQUFDLFlBRUFILE9BQUFJLE1BQUEsZ0JBRUFDLEtBQUFDLE9BQUEsRUFBQUQsS0FBQUUsR0FDQUYsS0FBQUcsSUFBQSxTQUFBQyxFQUFBQyxHQUNBLE1BQUFELEdBQUFDLEVBR0EsSUFBQUMsMEJBQUEsU0FBQUMsUUFBQUMsUUFDQUEsV0FBQSxLQUFBQSxPQUFBQSxPQUFBUixLQUFBUSxNQUVBLElBQUFDLE1BQUFELFNBQUFFLEVBQUFDLE9BQUFKLFFBQUFQLEtBQUFHLElBQUEsR0FDQVMsSUFBQSxFQUNBQyxnQkFBQSxDQUNBLEtBQUFDLEVBQUEsRUFBQUEsRUFBQVAsUUFBQVEsT0FBQUQsSUFFQSxHQURBRixLQUFBTCxRQUFBTyxHQUNBTCxLQUFBRyxJQUFBLENBQ0FDLGVBQUFDLENBQ0EsT0FHQSxNQUFBRCxnQkFHQWxCLFFBQUFxQixVQUFBLFNBQUFDLEtBQ0FuQixXQUFB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LFlBQUEsU0FBQWQsTUFBQTZCLEtBQUFDLGNBQUFuQixnQkFBQUssV0FDQSxHQUFBZSxTQUFBRCxjQUFBRSxVQUVBN0osTUFBQVQsUUFBQSxXQUNBLEdBQUF1SyxLQUFBRixRQUFBLE9BQ0EsT0FBQS9CLE9BQUEvQixJQUFBZ0UsS0FBQXRLLEtBQ0EsU0FBQXNJLFVBRUEsTUFEQUEsVUFBQXJJLE1BRUErSSxnQkFBQWxCIiwiZmlsZSI6ImFwcC5hbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xuYXBwLmNvbnRyb2xsZXIoJ1RvbWJvbGFDdHJsJywgWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckZmlsdGVyJyxcbiAgICAnJHJvdXRlUGFyYW1zJywgJ0FwcFNlcnZpY2UnLCBUb21ib2xhQ3RybF0pO1xuZnVuY3Rpb24gVG9tYm9sYUN0cmwoJHJvb3RTY29wZSwgJHNjb3BlLCAkZmlsdGVyLCAkcm91dGVQYXJhbXMsIEFwcFNlcnZpY2UpIHtcblxuICAgICRzY29wZS52YWx1ZSA9ICdIT0xBIFRFU1QgT05FJztcblxuICAgIE1hdGguVFdPX1BJID0gMiAqIE1hdGguUEk7XG4gICAgTWF0aC5zdW0gPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gYSArIGI7XG4gICAgfTtcblxuICAgIHZhciByb3VsZXR0ZV93aGVlbF9zZWxlY3Rpb24gPSBmdW5jdGlvbiAoZml0bmVzcywgcmFuZG9tKSB7XG4gICAgICAgIHJhbmRvbSA9IHR5cGVvZiByYW5kb20gIT09ICd1bmRlZmluZWQnID8gcmFuZG9tIDogTWF0aC5yYW5kb207XG5cbiAgICAgICAgdmFyIHJhbmQgPSByYW5kb20oKSAqIF8ucmVkdWNlKGZpdG5lc3MsIE1hdGguc3VtLCAwKTtcbiAgICAgICAgdmFyIHRtcCA9IDA7XG4gICAgICAgIHZhciBzZWxlY3RlZF9pbmRleCA9IC0xO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZml0bmVzcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdG1wICs9IGZpdG5lc3NbaV07XG4gICAgICAgICAgICBpZiAocmFuZCA8IHRtcCkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkX2luZGV4ID0gaTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRfaW5kZXg7XG4gICAgfTtcblxuICAgICRzY29wZS5icmluZ0RhdGEgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIEFwcFNlcnZpY2UuZ2V0RGF0YSgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5kYXRhQmFjayA9IGRhdGE7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgY3JlYXRlX3doZWVsX2ltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9ICh0aGlzLndoZWVsX3JhZGl1cyAqIDIpICsgMTY7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSAodGhpcy53aGVlbF9yYWRpdXMgKiAyKSArIDE2O1xuXG4gICAgICAgIHZhciB3aGVlbF9jZW50ZXJfeCA9IHRoaXMud2hlZWxfcmFkaXVzO1xuICAgICAgICB2YXIgd2hlZWxfY2VudGVyX3kgPSB0aGlzLndoZWVsX3JhZGl1cztcblxuICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgICAgICBjdHgudHJhbnNsYXRlKHdoZWVsX2NlbnRlcl94LCB3aGVlbF9jZW50ZXJfeSk7XG4gICAgICAgIGN0eC50cmFuc2xhdGUoLXdoZWVsX2NlbnRlcl94LCAtd2hlZWxfY2VudGVyX3kpO1xuXG4gICAgICAgIHZhciBhY3Jfc3RhcnQgPSAwO1xuXG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFyY193aWR0aHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiNmZjAwMDBcIjtcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSB0aGlzLmxpbmVXaWR0aDtcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHRoaXMubGluZUNvbG9yO1xuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY3R4Lm1vdmVUbyh3aGVlbF9jZW50ZXJfeCwgd2hlZWxfY2VudGVyX3kpO1xuICAgICAgICAgICAgdmFyIGFyY19lbmQgPSBhY3Jfc3RhcnQgKyB0aGlzLmFyY193aWR0aHNbaV07XG4gICAgICAgICAgICBjdHguYXJjKHdoZWVsX2NlbnRlcl94LCB3aGVlbF9jZW50ZXJfeSwgdGhpcy53aGVlbF9yYWRpdXMgLSB0aGlzLmxpbmVXaWR0aCwgYWNyX3N0YXJ0LCBhcmNfZW5kLCBmYWxzZSk7XG4gICAgICAgICAgICBjdHgubGluZVRvKHdoZWVsX2NlbnRlcl94LCB3aGVlbF9jZW50ZXJfeSk7XG4gICAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgdmFyIGFkamFjZW50ID0gTWF0aC5jb3MoYWNyX3N0YXJ0ICsgKGFyY19lbmQgLSBhY3Jfc3RhcnQpIC8gMikgKiAodGhpcy53aGVlbF9yYWRpdXMgLSAxMCk7XG4gICAgICAgICAgICB2YXIgb3Bwb3NpdGUgPSBNYXRoLnNpbihhY3Jfc3RhcnQgKyAoYXJjX2VuZCAtIGFjcl9zdGFydCkgLyAyKSAqICh0aGlzLndoZWVsX3JhZGl1cyAtIDEwKTtcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUod2hlZWxfY2VudGVyX3ggKyBhZGphY2VudCwgd2hlZWxfY2VudGVyX3kgKyBvcHBvc2l0ZSk7XG4gICAgICAgICAgICBjdHgucm90YXRlKGFjcl9zdGFydCArIChhcmNfZW5kIC0gYWNyX3N0YXJ0KSAvIDIpO1xuXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gXCIjMDAwMDAwXCI7XG4gICAgICAgICAgICBjdHgudGV4dEFsaWduID0gXCJyaWdodFwiO1xuICAgICAgICAgICAgY3R4LmZvbnQgPSBcIjIwcHggbWFyY2VsbHVzXCI7XG4gICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gXCJtaWRkbGVcIjtcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dCh0aGlzLmxhYmVsc1tpXSwgMCwgMCk7XG5cbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG5cbiAgICAgICAgICAgIGFjcl9zdGFydCA9IGFyY19lbmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICB9O1xuXG4gICAgdmFyIGNyZWF0ZUlubmVyQ2lyY2xlID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICB2YXIgd2hlZWxfY2VudGVyX3ggPSB0aGlzLndoZWVsX21hcmdpbiArIHRoaXMud2hlZWxfcmFkaXVzO1xuICAgICAgICB2YXIgd2hlZWxfY2VudGVyX3kgPSB0aGlzLndoZWVsX21hcmdpbiArIHRoaXMud2hlZWxfcmFkaXVzO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gXCIjZmYwMDAwXCI7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSB0aGlzLmxpbmVXaWR0aDtcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5saW5lQ29sb3I7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4LmFyYyh3aGVlbF9jZW50ZXJfeCwgd2hlZWxfY2VudGVyX3ksIDUwLCAwLCAyICogTWF0aC5QSSwgZmFsc2UpO1xuICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG5cbiAgICAgICAgdmFyIGZvbnRTaXplID0gMjA7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiNmZmZmZmZcIjtcbiAgICAgICAgY3R4LmZvbnQgPSBmb250U2l6ZSArIFwicHggbWFyY2VsbHVzXCI7XG4gICAgICAgIGN0eC50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gXCJtaWRkbGVcIjtcbiAgICAgICAgY3R4LmZpbGxUZXh0KCdDTElDSycsIHdoZWVsX2NlbnRlcl94LCB3aGVlbF9jZW50ZXJfeSAtIChmb250U2l6ZSAvIDIpKTtcbiAgICAgICAgY3R4LmZpbGxUZXh0KCdBUVXDjScsIHdoZWVsX2NlbnRlcl94LCB3aGVlbF9jZW50ZXJfeSArIChmb250U2l6ZSAvIDIpKTtcbiAgICB9O1xuXG5cbiAgICB2YXIgcmVuZGVyID0gZnVuY3Rpb24gKHJvdGF0aW9uKSB7XG4gICAgICAgIHJvdGF0aW9uID0gdHlwZW9mIHJvdGF0aW9uICE9PSAndW5kZWZpbmVkJyA/IHJvdGF0aW9uIDogMDtcblxuICAgICAgICB2YXIgY2FudmFzID0gdGhpcy53aGVlbF9jYW52YXM7XG4gICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgICAgIHZhciB3aGVlbF9jZW50ZXJfeCA9IHRoaXMud2hlZWxfbWFyZ2luICsgdGhpcy53aGVlbF9yYWRpdXM7XG4gICAgICAgIHZhciB3aGVlbF9jZW50ZXJfeSA9IHRoaXMud2hlZWxfbWFyZ2luICsgdGhpcy53aGVlbF9yYWRpdXM7XG5cbiAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBjdHgudHJhbnNsYXRlKHdoZWVsX2NlbnRlcl94LCB3aGVlbF9jZW50ZXJfeSk7XG4gICAgICAgIGN0eC5yb3RhdGUocm90YXRpb24pO1xuICAgICAgICBjdHgudHJhbnNsYXRlKC13aGVlbF9jZW50ZXJfeCwgLXdoZWVsX2NlbnRlcl95KTtcbiAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLndoZWVsX2ltYWdlLCB0aGlzLndoZWVsX21hcmdpbiwgdGhpcy53aGVlbF9tYXJnaW4pO1xuICAgICAgICBjdHgucmVzdG9yZSgpO1xuXG4gICAgICAgIGNyZWF0ZUlubmVyQ2lyY2xlKGN0eCk7XG5cbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHgubW92ZVRvKHdoZWVsX2NlbnRlcl94ICsgdGhpcy53aGVlbF9yYWRpdXMgLSA1LCB3aGVlbF9jZW50ZXJfeSk7XG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMDBmZjAwJztcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDM7XG4gICAgICAgIGN0eC5saW5lVG8od2hlZWxfY2VudGVyX3ggKyB0aGlzLndoZWVsX3JhZGl1cyArIDUwLCB3aGVlbF9jZW50ZXJfeSk7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcblxuICAgIH07XG5cblxuICAgIHZhciBnZXRXID0gZnVuY3Rpb24gKGNvbGxlY3Rpb24pIHtcbiAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sbGVjdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25JdGVtID0gY29sbGVjdGlvbltpXTtcbiAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uSXRlbS53ICYmIGNvbGxlY3Rpb25JdGVtLncgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cblxuICAgIHZhciByZXNldCA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uKSB7XG5cbiAgICAgICAgdGhpcy5pbmRleFcgPSBnZXRXKGNvbGxlY3Rpb24pO1xuXG4gICAgICAgIHZhciBmaXRuZXNzX3ZhbHVlcyA9IGNvbGxlY3Rpb24ubWFwKGZ1bmN0aW9uIChpbmRpdmlkdWFsKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5kaXZpZHVhbFtcImZpdG5lc3NcIl07XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgZml0bmVzc19zdW0gPSBfLnJlZHVjZShmaXRuZXNzX3ZhbHVlcywgTWF0aC5zdW0sIDApO1xuXG4gICAgICAgIGlmIChmaXRuZXNzX3N1bSAhPT0gMCkge1xuICAgICAgICAgICAgdmFyIGxhYmVsX3ZhbHVlcyA9IGNvbGxlY3Rpb24ubWFwKGZ1bmN0aW9uIChpbmRpdmlkdWFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGl2aWR1YWxbXCJsYWJlbFwiXTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmFyY193aWR0aHMgPSBfLm1hcChmaXRuZXNzX3ZhbHVlcywgZnVuY3Rpb24gKGZpdG5lc3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZml0bmVzcyAvIGZpdG5lc3Nfc3VtICogTWF0aC5UV09fUEk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMubGFiZWxzID0gbGFiZWxfdmFsdWVzO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFyY193aWR0aHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMubGFiZWxzID0gW107XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXNpemUgY2FudmFzXG4gICAgICAgIHZhciBjYW52YXNfZWwgPSB0aGlzLiR3aGVlbF9jYW52YXM7XG4gICAgICAgIHZhciBjYW52YXMgPSB0aGlzLndoZWVsX2NhbnZhcztcblxuICAgICAgICB2YXIgYm91bmRpbmdfcmVjdF93aWR0aCA9IE1hdGgubWluKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIHRoaXMud2hlZWxfbWFyZ2luID0gMjA7XG4gICAgICAgIHRoaXMud2hlZWxfcmFkaXVzID0gYm91bmRpbmdfcmVjdF93aWR0aCAvIDIgLSB0aGlzLndoZWVsX21hcmdpbjtcblxuICAgICAgICBjYW52YXMud2lkdGggPSBNYXRoLm1pbihNYXRoLm1heChNYXRoLm1pbih3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KSwgMzIwKSwgNTAwKTtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGNhbnZhcy53aWR0aDtcblxuICAgICAgICB0aGlzLndoZWVsX2ltYWdlID0gY3JlYXRlX3doZWVsX2ltYWdlKCk7XG4gICAgICAgIGNhbnZhc19lbC5hZGRDbGFzcyhcImNsaWNrYWJsZVwiKTtcbiAgICAgICAgcmVuZGVyKCk7XG4gICAgfTtcblxuXG4gICAgdmFyIGdldEluZGV4ID0gZnVuY3Rpb24gKHNlbGYpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleFc7XG4gICAgICAgIGlmICh0aGlzLmluZGV4VyA9PSAtMSkge1xuICAgICAgICAgICAgaW5kZXggPSByb3VsZXR0ZV93aGVlbF9zZWxlY3Rpb24oc2VsZi5hcmNfd2lkdGhzLCBzZWxmLnJhbmRvbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTcGluIHRoZSB3aGVlbFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFmdGVyIC0gQSBjYWxsYmFjayB3aGljaCBnZXRzIGNhbGxlZCBhdCB0aGUgZW5kIG9mIHRoZSBhbmltYXRpb25cbiAgICAgKi9cbiAgICB2YXIgcmVuZGVyX3NwaW4gPSBmdW5jdGlvbiAoYWZ0ZXIpIHtcbiAgICAgICAgYWZ0ZXIgPSB0eXBlb2YgYWZ0ZXIgIT09ICd1bmRlZmluZWQnID8gYWZ0ZXIgOiBfLm5vb3AoKTtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBpbmRleCA9IGdldEluZGV4KHNlbGYpO1xuXG4gICAgICAgIHZhciBwYXJ0aWFsX2V4Y2x1c2l2ZSA9IF8ucmVkdWNlKHNlbGYuYXJjX3dpZHRocy5zbGljZSgwLCBpbmRleCksIE1hdGguc3VtLCAwKTtcbiAgICAgICAgdmFyIHBhcnRpYWxfaW5jbHVzaXZlID0gcGFydGlhbF9leGNsdXNpdmUgKyBzZWxmLmFyY193aWR0aHNbaW5kZXhdO1xuICAgICAgICB2YXIgYW5nbGVfc2VsZWN0ZWQgPSBwYXJ0aWFsX2V4Y2x1c2l2ZSArIChwYXJ0aWFsX2luY2x1c2l2ZSAtIHBhcnRpYWxfZXhjbHVzaXZlKSAvIDI7XG4gICAgICAgIHZhciBmdWxsX3JvdGF0aW9ucyA9IDEwO1xuICAgICAgICB2YXIgcm90YXRpb25fbWF4ID0gTWF0aC5UV09fUEkgKiBmdWxsX3JvdGF0aW9ucyArIChNYXRoLlRXT19QSSAtIGFuZ2xlX3NlbGVjdGVkKTtcblxuICAgICAgICB2YXIgYW5pbWF0aW9uX3N0YXJ0ID0gbW9tZW50KCk7XG4gICAgICAgIHZhciBhbmltYXRpb25faW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGltZSA9IG1vbWVudCgpLmRpZmYoYW5pbWF0aW9uX3N0YXJ0KTtcbiAgICAgICAgICAgIHZhciBlYXNpbmcgPSAkLmVhc2luZy5lYXNlT3V0Q2lyYyhudWxsLCB0aW1lLCAwLCByb3RhdGlvbl9tYXgsIHNlbGYuYW5pbWF0aW9uX2R1cmF0aW9uKTtcbiAgICAgICAgICAgIHZhciByb3RhdGlvbiA9IGVhc2luZyAlIE1hdGguVFdPX1BJO1xuICAgICAgICAgICAgcmVuZGVyKHJvdGF0aW9uKTtcbiAgICAgICAgfSwgTWF0aC5taW4oMSwgTWF0aC5yb3VuZCgxMDAwIC8gdGhpcy5mcHMpKSk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGFuaW1hdGlvbl9pbnRlcnZhbCk7XG4gICAgICAgICAgICBhZnRlcigpO1xuICAgICAgICB9LCBzZWxmLmFuaW1hdGlvbl9kdXJhdGlvbik7XG4gICAgfTtcblxuICAgIHZhciBzcGluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWwgPSAkKFwiY2FudmFzXCIpLmZpcnN0KCk7XG4gICAgICAgIGlmICghZWwuaGFzQ2xhc3MoXCJjbGlja2FibGVcIikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbC5yZW1vdmVDbGFzcyhcImNsaWNrYWJsZVwiKTtcblxuICAgICAgICByZW5kZXJfc3BpbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlbC5hZGRDbGFzcyhcImNsaWNrYWJsZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBpbml0aWFsaXplID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IHR5cGVvZiBvcHRpb25zICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMgOiB7fTtcbiAgICAgICAgdGhpcy5yYW5kb20gPSB0eXBlb2Ygb3B0aW9ucy5yYW5kb20gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5yYW5kb20gOiBNYXRoLnJhbmRvbTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25fZHVyYXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5hbmltYXRpb25fZHVyYXRpb24gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbmltYXRpb25fZHVyYXRpb24gOiAxMDAwMDsgLy8gbXNcbiAgICAgICAgdGhpcy5mcHMgPSB0eXBlb2Ygb3B0aW9ucy5mcHMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5mcHMgOiA2MDtcbiAgICAgICAgdGhpcy4kd2hlZWxfY2FudmFzID0gJChcImNhbnZhc1wiKTtcbiAgICAgICAgdGhpcy53aGVlbF9jYW52YXMgPSB0aGlzLiR3aGVlbF9jYW52YXMuZ2V0KDApO1xuICAgICAgICB0aGlzLmxpbmVXaWR0aCA9IG9wdGlvbnMubGluZVdpZHRoICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubGluZVdpZHRoIDogMztcbiAgICAgICAgdGhpcy5saW5lQ29sb3IgPSBvcHRpb25zLmxpbmVDb2xvciAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmxpbmVDb2xvciA6ICcjMDAwMDAwJztcbiAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBvcHRpb25zLmNvbGxlY3Rpb247XG4gICAgICAgIHJlc2V0KGNvbGxlY3Rpb24pO1xuXG4gICAgICAgIHRoaXMuJHdoZWVsX2NhbnZhcy5jbGljayhzcGluKTtcbiAgICB9O1xuXG4gICAgdmFyIGNoYW5jZSA9IG5ldyBDaGFuY2UoKTtcbiAgICB2YXIgcm5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2hhbmNlLnJhbmRvbSgpO1xuICAgIH07XG5cbiAgICBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblxuXG4gICAgICAgIHZhciB3aGVlbCA9IHtcbiAgICAgICAgICAgIHJhbmRvbTogcm5nLFxuICAgICAgICAgICAgY29sbGVjdGlvbjogW3snbGFiZWwnOiAnVW5vJywgJ3ZhbHVlJzogJzEnLCAnZml0bmVzcyc6IDEsICd3JzogMH0sIHtcbiAgICAgICAgICAgICAgICAnbGFiZWwnOiAnZG9zJyxcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAnMicsXG4gICAgICAgICAgICAgICAgJ2ZpdG5lc3MnOiAxLFxuICAgICAgICAgICAgICAgICd3JzogMFxuICAgICAgICAgICAgfSwgeydsYWJlbCc6ICd0cmVzJywgJ3ZhbHVlJzogJzMnLCAnZml0bmVzcyc6IDEsICd3JzogMH1dLFxuICAgICAgICAgICAgbGluZVdpZHRoOiA1LFxuICAgICAgICAgICAgbGluZUNvbG9yOiAnIzAwMDAwMCdcblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBtYXJjZWxsdXMgPSBuZXcgRm9udEZhY2UoJ21hcmNlbGx1cycsICd1cmwoLi4vZm9udC9NYXJjZWxsdXNTQy1SZWd1bGFyLnR0ZiknLCB7XG4gICAgICAgICAgICBzdHlsZTogJ25vcm1hbCcsXG4gICAgICAgICAgICB3ZWlnaHQ6ICc0MDAnXG4gICAgICAgIH0pO1xuICAgICAgICBkb2N1bWVudC5mb250cy5hZGQobWFyY2VsbHVzKTtcbiAgICAgICAgbWFyY2VsbHVzLmxvYWQoKTtcbiAgICAgICAgbWFyY2VsbHVzLmxvYWRlZC50aGVuKGZ1bmN0aW9uIChmb250RmFjZSkge1xuICAgICAgICAgICAgLy8gVGhpcyBpcyB3aGVyZSB5b3UgY2FuIGRlY2xhcmUgYSBuZXcgZm9udC1mYW1pbHksIGJlY2F1c2UgdGhlIGZvbnQgaXMgbm93IGxvYWRlZCBhbmQgcmVhZHkuXG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ0N1cnJlbnQgc3RhdHVzJywgZm9udEZhY2Uuc3RhdHVzKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZvbnRGYWNlLmZhbWlseSwgJ2xvYWRlZCBzdWNjZXNzZnVsbHkuJyk7XG4gICAgICAgICAgICBpbml0aWFsaXplKHdoZWVsKTtcbi8vIFRocm93IGFuIGVycm9yIGlmIGxvYWRpbmcgd2Fzbid0IHN1Y2Nlc3NmdWxcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5vdCBmb3VuZCBmb250XCIpXG4gICAgICAgIH0pO1xuXG5cbiAgICB9KTtcblxuXG59O1xuXG4iLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuXG5cdHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyxbXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25nUm91dGUnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1aS5ib290c3RyYXAnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICduZ1Nhbml0aXplJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbmdBbmFseXRpY3MnXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG5cblx0ZmV0Y2hDb25maWd1cmF0aW9uKCkudGhlbihib290c3RyYXBBcHBsaWNhdGlvbik7XG5cblx0ZnVuY3Rpb24gZmV0Y2hDb25maWd1cmF0aW9uKCkge1xuXHQgICAgdmFyIGluaXRJbmplY3RvciA9IGFuZ3VsYXIuaW5qZWN0b3IoWyduZyddKTtcblx0ICAgIHZhciAkaHR0cCA9IGluaXRJbmplY3Rvci5nZXQoJyRodHRwJyk7XG5cdCAgICB2YXIgY29uZmlnRmlsZSA9ICd0b21ib2xhLmNvbmZpZy5qc29uP3YyJztcblx0ICAgIHZhciBhcGlCYXNlID0gJy9hcGkvJztcblxuXHQgICAgcmV0dXJuICRodHRwLmdldChjb25maWdGaWxlKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdCAgICAgIHZhciBjb25maWdEYXRhID0gcmVzcG9uc2UuZGF0YTtcblx0ICAgICAgY29uZmlnRGF0YS5hZG1pbkNvbnRleHQgPSBjb25maWdEYXRhLmJhY2tlbmRCYXNlQ29udGV4dCArIGFwaUJhc2U7XG4gICAgICAgICAgICBhcHAuY29uc3RhbnQoJ2NvbmZpZycsIGNvbmZpZ0RhdGEpO1xuXHQgICAgfSwgZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkge1xuXHQgICAgICB2YXIgZGVmYXVsdEJhY2tlbmQgPSAnaHR0cDovL2xvY2FsaG9zdDo4MDgwL3NtYXJ0LWJhY2tlbmQnO1xuICAgICAgICAgICAgYXBwLmNvbnN0YW50KCdjb25maWcnLCB7XG5cdCAgICAgICAgJ2JhY2tlbmRCYXNlQ29udGV4dCc6IGRlZmF1bHRCYWNrZW5kLFxuXHQgICAgICAgICdhZG1pbkNvbnRleHQnOiBkZWZhdWx0QmFja2VuZCArIGFwaUJhc2Vcblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGJvb3RzdHJhcEFwcGxpY2F0aW9uKCkge1xuXHQgICAgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0ICAgICAgICBhbmd1bGFyLmJvb3RzdHJhcChkb2N1bWVudCwgWydhcHAnXSk7XG5cdCAgICB9KTtcblx0fVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoXCJhcHBDdHJsXCIsXG5cdFx0XHRbJyRyb290U2NvcGUnLCAnJHNjb3BlJywnJHVpYk1vZGFsJywgYXBwQ3RybCBdKTtcblxuXHRmdW5jdGlvbiBhcHBDdHJsKCRyb290U2NvcGUsJHNjb3BlLCR1aWJNb2RhbCkge1xuXG5cblxuXHR9XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuc2VydmljZShcInJlc3BvbnNlU2VydmljZVwiLFxuICAgICAgICAgICBSZXNwb25zZVNlcnZpY2UpO1xuXG4gIGZ1bmN0aW9uIFJlc3BvbnNlU2VydmljZSgpIHtcblxuICAgIHRoaXMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9O1xuXG4gICAgdGhpcy5lcnJvciA9IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvcik7XG4gICAgfTtcbiAgfVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAgICAgLnJ1bihbJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgJ25nQW5hbHl0aWNzU2VydmljZScsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkbG9jYXRpb24sIG5nQW5hbHl0aWNzU2VydmljZSkge1xuICAgICAgICAgICAgLy8gIG5nQW5hbHl0aWNzU2VydmljZS5zZXRDbGllbnRJZCgnMTAyNjgzMTA1MDkzNS1wc25sNzZubDMyZGRvMGJoN2NzOGU0dWg4b3Rpb2pmOC5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbScpO1xuICAgICAgICB9XSk7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29uZmlnKFsnJGh0dHBQcm92aWRlcicsIGZ1bmN0aW9uICgkaHR0cFByb3ZpZGVyKSB7XG4gICAgICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMudXNlWERvbWFpbiA9IHRydWU7XG4gICAgICAgIGRlbGV0ZSAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLVJlcXVlc3RlZC1XaXRoJ107XG4gICAgfVxuICAgIF0pO1xuXG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAgICAgLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgICAgICAgICAgLndoZW4oJy90b21ib2xhJywge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC90b21ib2xhL21haW4uaHRtbCcsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RUbzogJy90b21ib2xhJ1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuXG59KSgpO1xuIiwiXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLnNlcnZpY2UoXCJBcHBTZXJ2aWNlXCIsXG4gICAgICAgIFsnJGh0dHAnLCAnJHNjZScsICdjb25maWcnLCAncmVzcG9uc2VTZXJ2aWNlJywnJGxvY2F0aW9uJywgZnVuY3Rpb24gKCRodHRwLCAkc2NlLCBjb25maWdTZXJ2aWNlLCBSZXNwb25zZVNlcnZpY2UgLCRsb2NhdGlvbikge1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBjb25maWdTZXJ2aWNlLmJhY2tlbmRVcmw7XG5cbiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gY29udGV4dCtcIi9kYXRhXCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlVmFyID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZVZhcjtcbiAgICAgICAgICAgICAgICAgICAgfSwgUmVzcG9uc2VTZXJ2aWNlLmVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfV0pO1xuXG4iXX0=
